import requests
import json

def scan_and_generate_report(url):
    try:
        zap_scan_results = {"vulnerabilities": [{"name": "SQL Injection", "severity": "High"}, {"name": "XSS", "severity": "Medium"}, {"name": "Open Redirect", "severity": "Low"}]}
        report = generate_report(zap_scan_results)
        print("Scan complete. Generating report...\n")
        print(report)
        save_report_to_json(zap_scan_results)
    except Exception as e:
        print(f"Error during vulnerability scanning: {str(e)}")

def generate_report(scan_results):
    report = "# Vulnerability Report\n\n"
    report += f"Total vulnerabilities found: {len(scan_results['vulnerabilities'])}\n\n"
    for index, vuln in enumerate(scan_results['vulnerabilities'], start=1):
        report += f"### Vulnerability {index}\n\n"
        report += f"- Name: {vuln['name']}\n"
        report += f"- Severity: {vuln['severity']}\n\n"
    return report

def save_report_to_json(scan_results):
    with open("vulnerability_report.json", "w") as report_file:
        json.dump(scan_results, report_file, indent=4)
        print("\nReport saved as vulnerability_report.json")

if __name__ == "__main__":
    website_url = "https://example.com"
    scan_and_generate_report(website_url)
